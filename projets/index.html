<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap" rel="stylesheet">
    <title>Projets - Dragonheart Studios</title>
    <link rel="icon" type="image/png" href="../assets/images/favicon.png">
    <style>
        #projects {
            margin-top: 50px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 20px;
        }

        .page-title {
            font-size: 48px;
            font-weight: bold;
            font-family: 'Mooli', 'Poetsen One', sans-serif;
            background: linear-gradient(to top right, rgb(190, 16, 170), rgb(190, 16, 53));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .page-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div id="background">
        <img src="../assets/images/background.png" alt="Background Image">
    </div>

    <div id="header-container"></div>

    <div id="gradient">

        <div class="page-header">
            <h1 class="page-title" data-i18n="projectsPage.title">Tous nos projets</h1>
            <p class="page-description" data-i18n="projectsPage.description">DÃ©couvrez l'ensemble de nos crÃ©ations, des projets terminÃ©s aux jeux en dÃ©veloppement.</p>
        </div>

        <div id="projects">
            <div class="projects-container" id="projects-list">
                </div>
        </div>

        <div id="footer">
            <p>Â© <span id="year"></span> Dragonheart Studios. <span data-i18n="footer.rights">Tous droits rÃ©servÃ©s.</span></p>
        </div>
    </div>

    <script src="../assets/data/translations.js"></script>
    <script src="../assets/data/games.js"></script>
    <script src="../assets/data/team.js"></script>
    
    <script src="../script.js"></script>

    <script>
        // 2. CHARGEMENT DYNAMIQUE DU HEADER
        function loadHeader() {
            fetch('../assets/components/header.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('header-container').innerHTML = html;

                    // Initialiser la langue aprÃ¨s le chargement du header
                    const savedLang = localStorage.getItem('dragonheart_lang') || 'fr';
                    if (typeof TranslationEngine !== 'undefined') {
                        TranslationEngine.updateContent(savedLang);
                        
                        // Mise Ã  jour visuelle du bouton de langue
                        const currentLangDisplay = document.getElementById('current-lang');
                        if (currentLangDisplay) {
                            const emoji = savedLang === 'fr' ? 'ðŸ‡«ðŸ‡·' : 'ðŸ‡¬ðŸ‡§';
                            currentLangDisplay.innerHTML = `${emoji} ${savedLang.toUpperCase()} <span class="arrow">â–¼</span>`;
                        }
                    }
                })
                .catch(err => console.error('Erreur chargement header :', err));
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadHeader();
            document.getElementById('year').textContent = new Date().getFullYear();

            // Chargement des projets
            if (typeof GAMES_DATA !== 'undefined') {
                const container = document.getElementById('projects-list');
                GAMES_DATA.forEach(game => {
                    const card = document.createElement('div');
                    card.className = 'project-card';
                    card.dataset.gameId = game.id;
                    card.innerHTML = `
                        <img src="${game.image}" alt="${game.title.fr}" class="project-image">
                        <div class="project-content">
                            <h3 class="project-title">${game.title.fr}</h3>
                            <p class="project-description">${game.shortDescription.fr}</p>
                            <span class="project-tag ${game.status}">${getStatusText(game.status)}</span>
                        </div>
                    `;
                    container.appendChild(card);
                });
            }
        });

        function getStatusText(status) {
            const map = {
                'in-development': 'En dÃ©veloppement',
                'completed': 'TerminÃ©',
                'upcoming': 'Ã€ venir'
            };
            return map[status] || status;
        }
    </script>
</body>
</html>